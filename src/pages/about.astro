---
import Layout from '../layouts/Layout.astro';
import RotatingPortrait from '../components/RotatingPortrait.astro';
import { getLangFromUrl, useTranslations } from '../i18n/ui';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

function getLocalizedUrl(locale: string, route: string): string {
  if (locale === 'lv') {
    return route === '/' ? '/' : route;
  }
  return route === '/' ? `/${locale}` : `/${locale}${route}`;
}

const siteUrl = 'https://terapijariga.lv';
const currentUrl = `${siteUrl}/about`;

const structuredData = {
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "BreadcrumbList",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": t('nav.home'),
          "item": siteUrl
        },
        {
          "@type": "ListItem",
          "position": 2,
          "name": t('nav.about'),
          "item": currentUrl
        }
      ]
    },
    {
      "@type": "LocalBusiness",
      "@id": "https://terapijariga.lv/#business",
      "name": "TerapijaRiga – Kristīna Narmonte",
      "description": t('about.description'),
      "url": siteUrl,
      "telephone": "+371 20 584 384",
      "email": "kristina.narmonte@gmail.com",
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "Ģertrūdes iela 9",
        "addressLocality": "Riga",
        "addressCountry": "LV"
      },
      "priceRange": "€€"
    }
  ]
};
---

<Layout
  title={t('about.title')}
  description={t('about.description')}
  structuredData={structuredData}
>
  <article class="py-16 sm:py-24">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
      <!-- Header -->
      <header class="mb-16">
        <div class="flex flex-col md:flex-row items-start gap-8">
          <RotatingPortrait alt="Kristīna" class="w-40 h-40 flex-shrink-0 rounded-3xl shadow-lg overflow-hidden" />
          <div>
            <h1 class="text-4xl sm:text-5xl font-display font-bold text-neutral-900 mb-6">
              {t('about.h1')}
            </h1>
            <p class="text-lg text-neutral-600 mb-4 leading-relaxed">
              {t('about.intro')}
            </p>
            <p class="text-neutral-600 leading-relaxed">
              {t('about.intro2')}
            </p>
          </div>
        </div>
      </header>

      <!-- Education -->
      <section class="mb-12">
        <div class="bg-gradient-to-br from-primary-50 to-white rounded-3xl p-8 sm:p-10">
          <h2 class="text-2xl font-display font-bold text-neutral-900 mb-4">
            {t('about.education.title')}
          </h2>
          <p class="text-neutral-600 mb-6 leading-relaxed">
            {t('about.education.text')}
          </p>
          <ul class="space-y-3">
            {[t('about.education.list1'), t('about.education.list2'), t('about.education.list3')].map((item) => (
              <li class="flex items-start gap-3">
                <div class="w-6 h-6 bg-primary-500 rounded-lg flex items-center justify-center flex-shrink-0 mt-0.5">
                  <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                  </svg>
                </div>
                <span class="text-neutral-700">{item}</span>
              </li>
            ))}
          </ul>
        </div>
      </section>

      <!-- Approach -->
      <section class="mb-12">
        <h2 class="text-2xl font-display font-bold text-neutral-900 mb-4">
          {t('about.approach.title')}
        </h2>
        <p class="text-neutral-600 mb-4 leading-relaxed">
          {t('about.approach.text1')}
        </p>
        <p class="text-neutral-600 leading-relaxed">
          {t('about.approach.text2')}
        </p>
      </section>

      <!-- Sessions -->
      <section class="mb-12">
        <h2 class="text-2xl font-display font-bold text-neutral-900 mb-4">
          {t('about.sessions.title')}
        </h2>
        <p class="text-neutral-600 mb-4 leading-relaxed">
          {t('about.sessions.text1')}
        </p>
        <p class="text-neutral-600 leading-relaxed">
          {t('about.sessions.text2')}
        </p>
      </section>

      <!-- Values -->
      <section class="mb-12">
        <div class="bg-neutral-900 rounded-3xl p-8 sm:p-10">
          <h2 class="text-2xl font-display font-bold text-white mb-4">
            {t('about.values.title')}
          </h2>
          <p class="text-neutral-300 leading-relaxed">
            {t('about.values.text')}
          </p>
        </div>
      </section>

      <!-- Related Links -->
      <section class="mb-12">
        <div class="grid sm:grid-cols-2 gap-4">
          <a href={getLocalizedUrl(lang, '/services')} class="group bg-white rounded-2xl p-6 border border-neutral-100 hover:border-primary-200 hover:shadow-md transition-all">
            <h3 class="font-semibold text-neutral-900 mb-2 group-hover:text-primary-600 transition-colors">
              {t('nav.services')}
            </h3>
            <p class="text-sm text-neutral-500">
              {lang === 'lv' ? 'Individuālā un tiešsaistes terapija' : lang === 'ru' ? 'Индивидуальная и онлайн-терапия' : 'Individual and online therapy'}
            </p>
          </a>
          <a href={getLocalizedUrl(lang, '/faq')} class="group bg-white rounded-2xl p-6 border border-neutral-100 hover:border-primary-200 hover:shadow-md transition-all">
            <h3 class="font-semibold text-neutral-900 mb-2 group-hover:text-primary-600 transition-colors">
              {t('nav.faq')}
            </h3>
            <p class="text-sm text-neutral-500">
              {lang === 'lv' ? 'Kas ir geštalta terapija?' : lang === 'ru' ? 'Что такое гештальт-терапия?' : 'What is Gestalt therapy?'}
            </p>
          </a>
        </div>
      </section>

      <!-- CTA -->
      <div class="flex flex-col sm:flex-row gap-4">
        <a
          href={getLocalizedUrl(lang, '/contact')}
          class="inline-flex items-center justify-center px-8 py-4 bg-neutral-900 text-white font-medium rounded-2xl hover:bg-neutral-800 transition-all"
        >
          {t('home.cta.book')}
        </a>
      </div>
    </div>
  </article>
</Layout>
